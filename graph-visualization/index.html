<html>
<head>
<style type="text/css">
  #container {
    max-width: 1024px;
    height: 800px;
    /*margin: auto;*/
  }
</style>
</head>
<body>
<div id="container"></div>
<script src="sigma.min.js"></script>
<script src="plugins/sigma.parsers.json.min.js"></script>
<script src="plugins/sigma.layout.forceAtlas2.min.js"></script>
<script>
  var g = {
    nodes: [],
    edges: []
  };

  s = new sigma({
    graph: g,
    container: 'graph-container',
    renderer: {
      container: document.getElementById('container'),
      // type: 'canvas'
    },
    settings: {
    // minNodeSize: 8,
      // maxNodeSize: 20
    }
  });

  sigma.parsers.json('data.json', s, function() {
    // this below adds x, y attributes as well as size = degree of the node
    var i,
    nodes = s.graph.nodes(),
    len = nodes.length;

    for (i = 0; i < len; i++) {
      nodes[i].x = Math.random();
      nodes[i].y = Math.random();
      nodes[i].size = s.graph.degree(nodes[i].id);
      // nodes[i].color = nodes[i].center ? 'red' : 'green';
    }

    // Refresh the display:
    // s.refresh();

    // ForceAtlas Layout
    s.startForceAtlas2({
      worker: true,
      barnesHutOptimize: true,
      iterationsPerRender: 1000,
      startingIterations: 1000
    });

    setTimeout(function() {
      s.stopForceAtlas2();
      console.log("Stopping force atlas2");
    }, 30 * 1000);
  });
</script>
</body>
</html>
